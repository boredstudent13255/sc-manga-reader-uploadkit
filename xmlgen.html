<html>
  <style>
body {
  padding: 30px;
}
button {
  margin: 5px;
}
.seriesoverview {
  font-style: italic;
  margin-bottom: 5px;
}
.SeriesTitle {
 margin-bottom: 0px;
}
.SeriesTitleJa {
  margin-bottom: 5px;
  margin-top: -15px;
}
.generated-xml-parent {
  margin-top: 30px;
}
.generated-xml{
  background-color: EEEEEE;
  border-radius: 5px;
  width: 800px;
  height: 300px;
  padding: 10px;
  margin: 5px;
  overflow: scroll;
}
.XMLLabels {
  font-size: 24;
}
.ErrorReporting {
  color: FF0000;
}
.defaulthide {
  visibility: hidden;
}
.generated-xml-parent {
  visibility: hidden;
}
.minitext {
  font-size: 14;
}
.CurrentChapterPreviewParent {
  background-color: 252525;
  padding-top: 15px;
  padding-bottom: 1px;
  padding-left: 5%;
  padding-right: 20%;
  height: 300px;
}
.scan-chapter {
  padding: 0.5%;
  overflow: hidden;
  background-color: 383838;
  margin-bottom: 1%;
  border-radius: 3px;
  color: FFFFFF;
  font-family: Arial;
}
.scan-chapter:hover {
  background-color: 505050;
}
.chapt-data {
  padding-top: 0px;
}
.chapt-data-2 {
 font-size: 15;
  padding-left: 10px;
  margin-top: 4px;
}
.scandata2 {
  font-weight: 300;
}
.chapter-title-en {
  margin-left: 3px;
  font-size: 18;
  font-weight: 450;
}
.is-one-shot {
  color: FFFFFF;
  background-color: E84545;
  padding: 1px;
  padding-left: 5px;
  padding-right: 6px;
  margin-right: 5px;
  border-radius: 6px;
  font-weight: 450;
}
.arc-title {
  color: FFFFFF;
  background-color: 6484CE;
  padding: 1px;
  padding-left: 5px;
  padding-right: 6px;
  margin-right: 5px;
  border-radius: 6px;
  font-weight: 450;
}
.chapter-title-ja {
  padding-top: 5px;
  font-size: 14;
  padding-left: 10px;
}
.arc-title-ja {
  background-color: 476292;
  padding: 1px;
  padding-left: 5px;
  padding-right: 5px;
  margin-right: 12px;
  border-radius: 3px;
  font-weight: 1000;
 }
.AdditionalSettingsFloat {
  position: absolute;
  float: left;
  transform: translate(600px, -325px);
}
/*
Note: The CSS for the input fields does not exist to look nice. It exists to serve as a visual cue for when a field has been left empty. This isn't really an end user thing, visual pleasure isn't a concern.
*/
input {
  transition: all 0.1s ease-in-out;
  border-width: 5px;
  border: 2px solid #D0D0E0;
  background-color: F5F5FF;
  border-radius: 5px;
  padding: 3px 6px;
  box-sizing: border-box;
}
input:placeholder-shown {
  border: 2px solid #E0D0D0;
  background-color: FFE0E0;
}
input:disabled {
  background-color: FFFFFF;
  border: 2px solid #F0F0F5;
  color: DDDDDD;
}
select {
  transition: all 0.1s ease-in-out;
  border-width: 5px;
  border: 2px solid #D0D0E0;
  background-color: F5F5FF;
  border-radius: 5px;
  padding: 3px 8px;
  box-sizing: border-box;
}
select:disabled {
  background-color: FFFFFF;
  border: 2px solid #F0F0F5;
  color: DDDDDD;
}
textarea {
  transition: all 0.1s ease-in-out;
  border-width: 5px;
  border: 2px solid #D0D0E0;
  background-color: F8F8FF;
  border-radius: 5px;
  padding: 3px 6px;
  box-sizing: border-box;
  font-family: Arial;
  font-size: 14;
}
textarea:placeholder-shown {
  border: 2px solid #E0D0D0;
  background-color: FFE0E0;
}
.ImportantButtonToPress {
border: 2px solid #E0D0D0;
background-color: FFE0E0;
border-radius: 5px;
padding: 6px 12px;
font-size: 14;
visibility: hidden;
}
  </style>
  <body>
    <h1>SierraComix Manga Reader XML generator - chapter addition to existing series</h1>
      <!--
        Designed to serve as a friendly UI for updating the necessary XML in a chapter upload. Fetches and modifies series.xml, and if applicable, the previous chapter and/or next chapter's chapter.xml. The end user is tasked with filling the UI out and then pasting the generated XML into the places they are told to.
      -->
    <span class="FieldLabel">Parent Series ID: </span><input type="text" id="SeriesIDEntryField" name="SeriesID">
    <button onClick="retrieveSeriesXML('SeriesIDEntryField')">Go</button>
    <span class="ErrorReporting" id="LoadFailedError"></span>

    <div class="defaulthide" id="ChapterDetails">
      <p>
        <h2>New chapter for: "<span class="SeriesTitle"id="SeriesTitle">Series Title Here</span>"</h2>
        <div class="SeriesTitleJa" id="SeriesTitleJa">(Series Title Native Language)</div>
        <div class="seriesoverview" id="seriesdescription">Series Description Here</div>
        <span id="SeriesChapterCount">XX</span> Chapters are listed, ordered <span id="SeriesListOrder">new-to-old / old-to-new</span>
      </p>
    </div>

    <div class="defaulthide" id="ChapterDetailsFields">
      <p>
        <br>
        <h3>Please fill out the below.</h3>
        <span class="FieldLabel">Ch.#: </span><input type="text" id="ChaptNumber" placeholder="Ch.#" style="width: 50px;"> <span class="FieldLabel" >Final page number: </span><input type="text" id="ChaptPageCount" placeholder="##" style="width: 50px;">
        <br><br>
        <span class="FieldLabel">Modify Series ID and storage location for this chapter?</span> <input id="NeedReturnToSetting" onClick="disableSingleField('NeedReturnToSetting','KuseNiNarisouStyleSeriesID')" type="checkbox"> <input type="text" id="KuseNiNarisouStyleSeriesID" placeholder="Chapt True Series ID" style="width: 150px;" disabled>
        <br>
        <span class="minitext">If this chapter belongs to a subseries that should be listed on the parent series' page, use the subseries' internal ID. EX: Kuse ni Narisou would use 'kuse-ni-narisou' rather than 'chou-kuse'. If this is not a subseries chapter, leave this option disabled.</span>
        <br><br>

<!--Main chapter, arc titles form-->
        Include Arc Titles? <input onClick="disableDualField('HasChapterArcTitles', 'ScanlationArcTitle', 'OriginalChapterArcTitle')" id="HasChapterArcTitles" type="checkbox" checked>
        <br>
        <input type="text" id="ScanlationArcTitle" name="ChaptArcTitle" placeholder="English Arc Title" style="width: 500px; font-size: 18;">
        <p>
          <input type="text" id="OriginalChapterArcTitle" name="ChaptArcTitleJa" placeholder="Japanese Arc Title" style="width: 500px; font-size: 14;">
        </p>

<!--Main chapter, titles form-->
        Include Chapter Titles? <input onClick="disableDualField('HasChapterTitles', 'ScanlationTitle', 'OriginalChapterTitle')" id="HasChapterTitles" type="checkbox" checked>
        <br>
        <input type="text" id="ScanlationTitle" name="ChaptTitle" placeholder="English Chapter Title" style="width: 500px; font-size: 18;">
        <p>
          <input type="text" id="OriginalChapterTitle" name="ChaptTitleJa" placeholder="Japanese Chapter Title" style="width: 500px; font-size: 14;">
        </p>

<!--Main chapter, description-->
        <textarea id="ScanlationSummary" name="ScanSummary" placeholder="English Chapter Summary" style="width: 500px; height: 100px; resize: none;" value="Description Here"></textarea>

<!--Release info form-->
        <p>
          Released on <input id="InitialReleaseDateSetting" type="text" placeholder="1900/1/1" style="width: 75px;"> 
          <br>
          Scanlated on <input id="ScanlationDateSetting" type="text" placeholder="2020/1/1" style="width: 75px;"> by <input id="ScanlatorSetting" type="text" placeholder="My Future Translations" style="width: 300px;">
          <br>
          <span class="minitext">YYYY/MM/DD, please. No forced digit conformity.</span>
        </p>
        <div class="AdditionalSettingsFloat">
<!--Series handling form-->
        <span class="FieldLabel">Chapter type: </span>
        <select name="ChapterType" id="ChapterReleaseType" serialization>
          <option value="serialization">Serialization</option>
          <option value="one-shot">One-Shot</option>
        </select>
        <br><br>
        <span class="FieldLabel">Upon completion, return to...</span>
        <select name="PageReturnDestination" id="PageReturnDestination" spage disabled>
          <option value="serialization">Series' chapter select</option>
          <option value="one-shot">Series select</option>
        </select>

<!--Previous chapter form-->
        <br><br>
        <span class="FieldLabel">Previous Chapter? <input id="ChaptHasPreviousChapter" type="checkbox" onClick="disableDualField('ChaptHasPreviousChapter', 'PrevChaptSeriesID', 'PrevChaptNumber')" checked></span> <span class="minitext">(Inserts lead-ins to the previous chapter. Only for use if that chapter <b>already exists</b>.)</span>
        <br>
        <input type="text" id="PrevChaptSeriesID" placeholder="Series ID for chapter" style="width: 150px;"> <input type="text" id="PrevChaptNumber" placeholder="Ch.#" style="width: 50px;"> <button onClick="checkChapterTitle('InsertLastChapt','PrevChaptSeriesID','PrevChaptNumber')">Check Title</button> <span id="InsertLastChapt"></span>

<!--Next chapter form-->
        <br><br>
        <span class="FieldLabel"> Following Chapter? <input id="ChaptHasNextChapter" type="checkbox" onClick="disableDualField('ChaptHasNextChapter', 'NextChaptSeriesID', 'NextChaptNumber')" checked></span> <span class="minitext">(Inserts lead-ins to the next chapter. Only for use if that chapter <b>already exists</b>.)</span>
        <br>
        <input type="text" id="NextChaptSeriesID" placeholder="Series ID for chapter" style="width: 150px;"> <input type="text" id="NextChaptNumber" placeholder="Ch.#" style="width: 50px;"> <button onClick="checkChapterTitle('InsertNextChapt','NextChaptSeriesID','NextChaptNumber')">Check Title</button> <span id="InsertNextChapt"></span>

<!--Chapter Placement drop-down-->
        <br><br>
        <span class="FieldLabel">Placement in chapter navigation:</span>
        <br>
        Directly after 
        <select name="Chapter Placement Setting" id="ChapterPlacementSetting">
          <option value="0">nothing. Place Before All</option>
        </select>
        </div>
<!--Preview generator-->
        <br><br>
        <div class="deTranslate">
          <button onClick="regeneratePreviewChapterEntry()">Generate Preview</button>
        </div>
          <div class="CurrentChapterPreviewParent" id="CurrentChapterPreviewParent"></div>
        <div class="deTranslate">
          <br><br>
          <p>
            <button onClick="runAllXmlGen()"><h3>Generate XML</h3></button>
          </p>
<!--Temporary solution.-->
        <button id="ChaptXmlManualEdit1" class="ImportantButtonToPress" onClick="openGithubPage('nextchaptxml')">Following Chapter Manual Tailing Chapter Setting</button><button id="ChaptXmlManualEdit2" class="ImportantButtonToPress" onClick="openGithubPage('prevchaptxml')">Previous Chapter Manual Following Chapter Setting</button>
        </p>
      </div>
    </div>
<!--Series XML-->
    <div class="generated-xml-parent" id="SeriesXMLParent">
      <span class="XMLLabels">Series XML</span> <button onClick="copyToClipboard('SeriesDotXMLReGenerated')">Copy to Clipboard</button><button onClick="openGithubPage('seriesxml')">Go to paste location</button>
      <br><pre><div id="SeriesDotXMLReGenerated" class="generated-xml">
&lt;series&gt;
</div></pre>
    </div>

<!--Current Chapter XML-->
    <div class="generated-xml-parent" id="CurrChaptXMLParent">
      <span class="XMLLabels">Current Chapter (Ch.<span id="CurrentChapterNumberXmlTitle">XX</span>) XML</span> <button onClick="copyToClipboard('CurrentChapterChapterDotXMLReGenerated')">Copy to Clipboard</button><button onClick="openGithubPage('currchaptxml')">Go to paste location</button>
      <br><pre><div id="CurrentChapterChapterDotXMLReGenerated" class="generated-xml">
&lt;chapter&gt;
</div></pre>
    </div>

<!--Next Chapter XML-->
    <div class="generated-xml-parent" id="NextChaptXMLParent">
      <span class="XMLLabels">Following Chapter (Ch.<span id="NextChapterNumberXmlTitle">XX</span>) XML</span> <button onClick="copyToClipboard('NextChapterChapterDotXMLReGenerated')">Copy to Clipboard</button><button onClick="openGithubPage('nextchaptxml')">Go to paste location</button>
      <br><pre><div id="NextChapterChapterDotXMLReGenerated" class="generated-xml">
&lt;chapter&gt;
</div></pre>
    </div>

<!--Previous Chapter XML-->
    <div class="generated-xml-parent" id="PrevChaptXMLParent">
      <span class="XMLLabels">Previous Chapter (Ch.<span id="PrevChapterNumberXmlTitle">XX</span>) XML</span> <button onClick="copyToClipboard('PreviousChapterChapterDotXMLReGenerated')">Copy to Clipboard</button><button onClick="openGithubPage('prevchaptxml')">Go to paste location</button>
      <br><pre><div id="PreviousChapterChapterDotXMLReGenerated" class="generated-xml">
&lt;chapter&gt;
</div></pre>
    </div>
  </body>
  <script>
var SeriesXMLDisplayTitle, SeriesXMLDisplayTitleOrig, SeriesXMLOverview, SeriesXMLChapterTotal, SeriesXMLChapterListOrder, SeriesXMLSeriesID, CurrentChapterEntryInsertionPoint, NextChaptCheckBox, LastChaptCheckBox, NeedReturnToSetting, LastLaunchedFinalXML, ChaptNumberElement, NavDropdown;
var SeriesXMLChaptersArray = [];


//Allows retrieving the series XML by pressing 'enter' in the ID textbox
const textbox = document.getElementById('SeriesIDEntryField');
textbox.addEventListener('keydown', function(event) {
 if (event.key === 'Enter') {
 event.preventDefault();
retrieveSeriesXML('SeriesIDEntryField')
}
});

//Re-disables any user-disabled fields on reload
disableSingleField('NeedReturnToSetting','KuseNiNarisouStyleSeriesID')
disableDualField('HasChapterArcTitles', 'ScanlationArcTitle', 'OriginalChapterArcTitle')
disableDualField('HasChapterTitles', 'ScanlationTitle', 'OriginalChapterTitle')
disableDualField('ChaptHasPreviousChapter', 'PrevChaptSeriesID', 'PrevChaptNumber')
disableDualField('ChaptHasNextChapter', 'NextChaptSeriesID', 'NextChaptNumber')



//Functions

function runAllXmlGen() {
  NextChaptCheckBox = document.getElementById("ChaptHasNextChapter");
  LastChaptCheckBox = document.getElementById("ChaptHasPreviousChapter");
  const temporarybutton1 = document.getElementById("ChaptXmlManualEdit1");
  const temporarybutton2 = document.getElementById("ChaptXmlManualEdit2");
  //NextChaptXMLParent.style.visibility = 'visible';
  //PrevChaptXMLParent.style.visibility = 'visible';
  if (NextChaptCheckBox.checked) {
    temporarybutton1.style.visibility = 'visible';
  } else {
    temporarybutton1.style.visibility = 'hidden';
  }
  if (LastChaptCheckBox.checked) {
    temporarybutton2.style.visibility = 'visible';
  } else {
    temporarybutton2.style.visibility = 'hidden';
  }


  regenerateSeriesXML()
  generateCurrentChapterXML()

  //Check if user has stated intention to tie to a following chapter, regenerate XML if true
  if (NextChaptCheckBox.checked) {
    regenerateNeighboringChapterXML("NextChapterChapterDotXMLReGenerated")
  }

  //Check if user has stated intention to tie to a previous chapter, regenerate XML if true
  if (LastChaptCheckBox.checked) {
    regenerateNeighboringChapterXML("PreviousChapterChapterDotXMLReGenerated")
  }
  checkFinishedXmlForEmptyTags()
}

function regenerateNeighboringChapterXML(ChapterAndInsertPoint) {

}

//Regenerate XML for Parent Series
function regenerateSeriesXML() {
  SeriesXMLParent.style.visibility = 'visible';
  SeriesEntryInsertionPoint = document.querySelector("#SeriesDotXMLReGenerated");
  SeriesEntryInsertionPoint.innerText = '';
  SeriesEntryInsertionPoint.insertAdjacentText('beforeend','<series>\n');
  SeriesEntryInsertionPoint.insertAdjacentText('beforeend','  <series-id>' + SeriesXMLSeriesID + '</series-id>\n');
  SeriesEntryInsertionPoint.insertAdjacentText('beforeend','  <series-display-name>' + SeriesXMLDisplayTitle + '</series-display-name>\n');
  SeriesEntryInsertionPoint.insertAdjacentText('beforeend','  <series-original-name>' + SeriesXMLDisplayTitleOrig + '</series-original-name>\n');
  SeriesEntryInsertionPoint.insertAdjacentText('beforeend','  <series-overview>' + SeriesXMLOverview + '</series-overview>\n');
  SeriesEntryInsertionPoint.insertAdjacentText('beforeend','  <chapter-count>' + ++SeriesXMLChapterTotal + '</chapter-count>\n');
  --SeriesXMLChapterTotal;
  SeriesEntryInsertionPoint.insertAdjacentText('beforeend','  <order>' + SeriesXMLChapterListOrder + '</order>\n');
  SeriesEntryInsertionPoint.insertAdjacentText('beforeend','  <chapters>\n');
  
  //Insert Chapters
  ChaptNumberElement = document.getElementById("ChaptNumber");
  NavDropdown = document.getElementById("ChapterPlacementSetting");
  console.log("selected is " + NavDropdown.value);
  ++SeriesXMLChapterTotal;
  ++SeriesXMLChapterTotal;
  let i = 1;
  let i2 = 1;
  NeedReturnToSetting = document.getElementById("NeedReturnToSetting");
  if (NeedReturnToSetting.checked) {
    const KuseNiNarisouStyleSeriesID = document.getElementById("KuseNiNarisouStyleSeriesID");
    var NewChapterStorageLocation = KuseNiNarisouStyleSeriesID.value;
  } else {
    var NewChapterStorageLocation = SeriesXMLSeriesID;
  }

  if (ChaptNumberElement.value === "") {
    var ChaptNumber = "";
  } else {
    var ChaptNumber = verifyDoubleDigitMinimumConformity(ChaptNumberElement.value);
  }


  if (NavDropdown.value === "0") {
    SeriesEntryInsertionPoint.insertAdjacentText('beforeend','    <ent-' + i + '>' + NewChapterStorageLocation + '/Chapt' + ChaptNumber + '/</ent-' + i++ + '>\n');
    
  }
  for (i = i; i < SeriesXMLChapterTotal; i++) {
    SeriesEntryInsertionPoint.insertAdjacentText('beforeend','    <ent-' + i + '>' + SeriesXMLChaptersArray.at(i2 - 1) + '</ent-' + i + '>\n');
    console.log("Pasted in " + SeriesXMLChaptersArray.at(i - 1));
    console.log(i + " and " + NavDropdown.value);
    if (i == NavDropdown.value) {
      SeriesEntryInsertionPoint.insertAdjacentText('beforeend','    <ent-' + ++i + '>' + NewChapterStorageLocation + '/Chapt' + ChaptNumber + '/</ent-' + i + '>\n');
    }
    ++i2;
  } 
  --SeriesXMLChapterTotal;
  --SeriesXMLChapterTotal;

  SeriesEntryInsertionPoint.insertAdjacentText('beforeend','  </chapters>\n');
  SeriesEntryInsertionPoint.insertAdjacentText('beforeend','</series>');
}

//Generate XML for Current Chapter
function generateCurrentChapterXML() {
  CurrChaptXMLParent.style.visibility = 'visible';
  CurrentChapterEntryInsertionPoint = document.querySelector("#CurrentChapterChapterDotXMLReGenerated");
  CurrentChapterEntryInsertionPoint.innerText = '';
  CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','<chapter>\n');
  NeedReturnToSetting = document.getElementById("NeedReturnToSetting");
  const doArcTitles = document.getElementById("HasChapterArcTitles");
  const doChaptTitles = document.getElementById("HasChapterTitles");


  //"returnto" and "parentseries"
  const SeriesIDEntryFieldElement = document.getElementById("SeriesIDEntryField");
  if (NeedReturnToSetting.checked) {
    const KuseNiNarisouStyleSeriesIDElement = document.getElementById("KuseNiNarisouStyleSeriesID");
    CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <returnto>' + SeriesIDEntryFieldElement.value + '</returnto>\n');
    CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','\n');
    CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <parentseries>' + KuseNiNarisouStyleSeriesIDElement.value + '</parentseries>\n');
  } else {
    CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <parentseries>' + SeriesIDEntryFieldElement.value + '</parentseries>\n');
  }

  //"parentdisplayname" "chaptersummary" "chapterdisplaynum" "chapternum" "pagecount"
  const ScanlationSummaryElement = document.getElementById("ScanlationSummary");
  const ScanlationSummaryElementValue = ScanlationSummaryElement.value;
  ScanlationSummaryElement.value = ScanlationSummaryElementValue.replaceAll(/\n/g, ' ')

  ChaptNumberElement = document.getElementById("ChaptNumber");
  const PageLimiter = document.getElementById("ChaptPageCount");
  CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <parentdisplayname>' + SeriesXMLDisplayTitle + '</parentdisplayname>\n')
  CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <chaptersummary>' + ScanlationSummaryElement.value + '</chaptersummary>\n');
  CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','\n');
  CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <chapterdisplaynum>' + ChaptNumberElement.value + '</chapterdisplaynum>\n');
  CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <chapternum>' + verifyDoubleDigitMinimumConformity(ChaptNumberElement.value) + '</chapternum>\n');
  CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <pagecount>' + PageLimiter.value + '</pagecount>\n');

  //"arctitle" and "ja-arc-title"
  if (doArcTitles.checked) {
    const ArcTitleEn = document.getElementById("ScanlationArcTitle");
    const ArcTitleJa = document.getElementById("OriginalChapterArcTitle");
    CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <arctitle>' + ArcTitleEn.value + '</arctitle>\n');
    CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <ja-arc-title>' + ArcTitleJa.value + '</ja-arc-title>\n');
  }

  //"chaptertitle" and "ja-chapter-title"
  if (doChaptTitles.checked) {
    const ChapterTitleEn = document.getElementById("ScanlationTitle");
    const ChapterTitleJa = document.getElementById("OriginalChapterTitle");
    CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <chaptertitle>' + ChapterTitleEn.value + '</chaptertitle>\n');
    CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <ja-chapter-title>' + ChapterTitleJa.value + '</ja-chapter-title>\n');
  }

  //"publisd" "scanlatd" "scanlator" "type" "returnlinkstyle"
  const PublicationDateElement = document.getElementById("InitialReleaseDateSetting");
  const ScanlationDateElement = document.getElementById("ScanlationDateSetting");
  const ScanlatorElement = document.getElementById("ScanlatorSetting");
  const ReleaseTypeElement = document.getElementById("ChapterReleaseType");
  const ReturnStyleElement = document.getElementById("PageReturnDestination");
  CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <publisd>' + PublicationDateElement.value + '</publisd>\n');
  CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <scanlatd>' + ScanlationDateElement.value + '</scanlatd>\n');
  CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <scanlator>' + ScanlatorElement.value + '</scanlator>\n');
  CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <type>' + ReleaseTypeElement.value + '</type>\n');
  CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <returnlinkstyle>' + ReturnStyleElement.value + '</returnlinkstyle>\n');
  CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','\n');

  //"next-series" "next-number"
  const NextChapterIDElement = document.getElementById("NextChaptSeriesID");
  const NextChapterNumElement = document.getElementById("NextChaptNumber");
  if (NextChaptCheckBox.checked) {
    CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <next-series>' + NextChapterIDElement.value + '</next-series>\n');
    CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <next-number>' + verifyDoubleDigitMinimumConformity(NextChapterNumElement.value) + '</next-number>\n');
  } else {
    CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <next-series>null</next-series>\n');
    CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <next-number>null</next-number>\n');
  }

  CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','\n');

  //"previous-series" "previous-chapter"
  const PreviousChapterIDElement = document.getElementById("PrevChaptSeriesID");
  const PreviousChapterNumElement = document.getElementById("PrevChaptNumber");
  if (LastChaptCheckBox.checked) {
    CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <previous-series>' + PreviousChapterIDElement.value + '</previous-series>\n');
    CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <previous-chapter>' + verifyDoubleDigitMinimumConformity(PreviousChapterNumElement.value) + '</previous-chapter>\n');
  } else {
    CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <previous-series>null</previous-series>\n');
    CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','  <previous-chapter>null</previous-chapter>\n');
  }

  //closing tag
  CurrentChapterEntryInsertionPoint.insertAdjacentText('beforeend','</chapter>');

}

function testForClick() {
  console.log("Clicked checkbox!!");
}
function testForClick2() {
  console.log("Clicked other checkbox!!");
}

function retrieveSeriesXML(SeriesID) {
  var UserSpecID = document.getElementById(SeriesID).value;
  console.log("User specified ID is '" + UserSpecID + "'.");
  loadSeriesXML(UserSpecID);
  //const SeriesIDEmbedPoints = document.getElementById('seriesidembed');
  //SeriesIDEmbedPoints.innerHTML = UserSpecID;
}


function loadSeriesXML(SeriesIDToLoad) {
  //Loads XML code
  var text, parser, seriesXML;
  text = loadFileToElement("https://boredstudent13255.github.io/sc-manga-reader/titles/" + SeriesIDToLoad + "/series.xml");
  parser = new DOMParser();
  seriesXML = parser.parseFromString(text,"text/xml");

  //Fills out unmodifiable series fields
  const SeriesTitleField = document.getElementById('SeriesTitle');
  const SeriesTitleJaField = document.getElementById('SeriesTitleJa');
  const SeriesDescriptionField = document.getElementById('seriesdescription');
  const SeriesChapterCount = document.getElementById('SeriesChapterCount');
  const SeriesChapterListOrder = document.getElementById('SeriesListOrder');
  const SeriesXMLParent = document.getElementById('SeriesXMLParent');
  const CurrChaptXMLParent = document.getElementById('CurrChaptXMLParent');
  const NextChaptXMLParent = document.getElementById('NextChaptXMLParent');
  const PrevChaptXMLParent = document.getElementById('PrevChaptXMLParent');
  const ErrorField = document.getElementById('LoadFailedError');
  const NextChaptSeriesID = document.getElementById('NextChaptSeriesID');
  const PrevChaptSeriesID = document.getElementById('PrevChaptSeriesID');
  try {
    SeriesXMLSeriesID = seriesXML.getElementsByTagName("series-id")[0].childNodes[0].nodeValue;
    SeriesXMLDisplayTitle = seriesXML.getElementsByTagName("series-display-name")[0].childNodes[0].nodeValue;
    SeriesXMLDisplayTitleOrig = seriesXML.getElementsByTagName("series-original-name")[0].childNodes[0].nodeValue;
    SeriesXMLOverview = seriesXML.getElementsByTagName("series-overview")[0].childNodes[0].nodeValue;
    SeriesXMLChapterTotal = seriesXML.getElementsByTagName("chapter-count")[0].childNodes[0].nodeValue;
    SeriesXMLChapterListOrder = seriesXML.getElementsByTagName("order")[0].childNodes[0].nodeValue;
    const ChapterDropdownSelect = document.getElementById("ChapterPlacementSetting");
    ChapterDropdownSelect.innerHTML = "<option value='0'>nothing. Place Before All</option>";
    SeriesXMLChaptersArray = [];
    var holdCurrentEntry;
    //Loop to collect chapter entries
    ++SeriesXMLChapterTotal
    for (let i = 1; i < SeriesXMLChapterTotal; i++) {
      //console.log("ent-" + i);
      holdCurrentEntry = seriesXML.getElementsByTagName("ent-" + i)[0].childNodes[0].nodeValue;
      //console.log(holdCurrentEntry);
      SeriesXMLChaptersArray.push(holdCurrentEntry);
      ChapterDropdownSelect.insertAdjacentHTML('beforeend',"<option value='" + i + "'>" + holdCurrentEntry.replaceAll('/Chapt',' chapter ') + "</option>");
    }
    SeriesXMLChapterTotal--
    //console.log(SeriesXMLChaptersArray);

    SeriesTitleField.innerHTML = SeriesXMLDisplayTitle;
    SeriesTitleJaField.innerHTML = "(" + SeriesXMLDisplayTitleOrig + ")";
    SeriesDescriptionField.innerHTML = SeriesXMLOverview;
    SeriesChapterCount.innerHTML = SeriesXMLChapterTotal;
    if (SeriesXMLChapterListOrder === "afterend") {
      SeriesChapterListOrder.innerHTML = "from Newest to Oldest";
    } else {
      SeriesChapterListOrder.innerHTML = "from Oldest to Newest";
      SeriesXMLChapterListOrder = "beforebegin"; //Will correct a malformed entry upon regeneration of series.xml. As of writing all possible entries are functional, and will be read as "beforebegin", but this may change.
    }
    const ChapterDetails = document.getElementById('ChapterDetails');
    ChapterDetails.style.visibility = 'visible';
    ChapterDetailsFields.style.visibility = 'visible';
    ErrorField.style.visibility = 'hidden';
    NextChaptSeriesID.value = SeriesIDToLoad;
    PrevChaptSeriesID.value = SeriesIDToLoad;
  } catch {
    console.error("User attempted to load nonexistent or malformed series XML. Generated URL: 'https://boredstudent13255.github.io/sc-manga-reader/titles/" + SeriesIDToLoad + "/series.xml'");
    ErrorField.innerHTML = 'Could not load data from XML. Check for typos.';
    ErrorField.style.visibility = 'visible';
    ChapterDetails.style.visibility = 'hidden';
    ChapterDetailsFields.style.visibility = 'hidden';
    SeriesXMLParent.style.visibility = 'hidden';
    CurrChaptXMLParent.style.visibility = 'hidden';
    NextChaptXMLParent.style.visibility = 'hidden';
    PrevChaptXMLParent.style.visibility = 'hidden';
  }

}

function loadFileToElement(filename) {
  var xmlHTTP = new XMLHttpRequest();
  try
  {
  xmlHTTP.open("GET", filename, false);
  xmlHTTP.send(null);
  }
  catch (e) {
    console.error("Unable to load the requested XML.");
    return;
  }

  return xmlHTTP.responseText;
}

function checkChapterTitle(inserttarget, seriesidfield, chapternumfield) {
  const TitleInsertionPoint = document.getElementById(inserttarget);
  const ChapterSeriesIDContainer = document.getElementById(seriesidfield);
  const ChapterNumberContainer =  document.getElementById(chapternumfield);

  const ChapterNumber = verifyDoubleDigitMinimumConformity(ChapterNumberContainer.value); //Write function to verify that chapter number is double-digits or higher
  //const ChapterNumber = ChapterNumberContainer.value; //DO NOT KEEP THIS VERSION OF THIS IN.

  const ChapterSeriesID = ChapterSeriesIDContainer.value;

  var text, parser, ChaptXML;
  text = loadFileToElement("https://boredstudent13255.github.io/sc-manga-reader/titles/" + ChapterSeriesID + "/Chapt" + ChapterNumber + "/chapter.xml");
  parser = new DOMParser();
  ChaptXML = parser.parseFromString(text,"text/xml");

  try {
    if (text.includes('chaptertitle')) {
      TitleInsertionPoint.innerHTML = ChaptXML.getElementsByTagName("parentdisplayname")[0].childNodes[0].nodeValue + " - Chapter " + ChaptXML.getElementsByTagName("chapterdisplaynum")[0].childNodes[0].nodeValue + ": " + ChaptXML.getElementsByTagName("chaptertitle")[0].childNodes[0].nodeValue;
    } else {
      TitleInsertionPoint.innerHTML = ChaptXML.getElementsByTagName("parentdisplayname")[0].childNodes[0].nodeValue + " - Chapter " + ChaptXML.getElementsByTagName("chapterdisplaynum")[0].childNodes[0].nodeValue;
    }
  } catch {
    console.error("Chapter XML parsing failed");
  }
}


//Dis-Enable Single Field
function disableSingleField(checkboxid, targetid) {
  const Target1 = document.getElementById(targetid);
  const checkBox = document.getElementById(checkboxid);
  if (checkBox.checked) {
    Target1.disabled = false;
  } else {
    Target1.disabled = true;
  }
}

//Dis-Enable Double Field
function disableDualField(checkboxid, targetid, targetid2) {
  const Target1 = document.getElementById(targetid);
  const Target2 = document.getElementById(targetid2);
  const checkBox = document.getElementById(checkboxid);
  if (checkBox.checked) {
    Target1.disabled = false;
    Target2.disabled = false;
  } else {
    Target1.disabled = true;
    Target2.disabled = true;
  }
}

//Checks chapter input numbers. If it's a single digit number or decimal, adds a leading zero for compatibility with my existing numbering system. Chapter numbers that are actually strings or are beyond 9.999... will be unmodified.
function verifyDoubleDigitMinimumConformity(numToCheck) {
  if (isNaN(numToCheck)) {
    return numToCheck;
  } else {
    ++numToCheck;
    --numToCheck;
    console.log(numToCheck);
    console.log(typeof(numToCheck));
    let testVarType = typeof(numToCheck)
    if (testVarType === "number" && numToCheck < 10 && numToCheck > -1) {
      return "0" + numToCheck;
    } else {
      return numToCheck;
    }
  }
}

//Copy contents of DIV to clipboard
function copyToClipboard(text) {
  const source = document.getElementById(text);
  console.log(source.innerText);

  text = source.innerText;

  if (navigator.clipboard && window.isSecureContext) {
    return navigator.clipboard.writeText(text);
  } else {
    const textArea = document.createElement("textarea");
    textArea.value = text;
    textArea.style.position = "absolute";
    textArea.style.opacity = 0;
    document.body.appendChild(textArea);
    textArea.select();
    return new Promise((resolve, reject) => {
      document.execCommand('copy') ? resolve() : reject();
      textArea.remove();
    });
  }
}

//Jump to location for where to paste in the newly made XML
function openGithubPage(target) {

  //Auto-create and fill out new file for new chapter's XML
  if (target === "currchaptxml") {
    const source = document.getElementById("CurrentChapterChapterDotXMLReGenerated");
    LastLaunchedFinalXML = source.innerText;
    LastLaunchedFinalXML = LastLaunchedFinalXML.replaceAll("\n","%0A");
    const SeriesIDEntryFieldElement = document.getElementById("SeriesIDEntryField");
    const ChaptNumberElement = document.getElementById("ChaptNumber");
    if (NeedReturnToSetting.checked) {
      const KuseNiNarisouStyleSeriesIDElement = document.getElementById("KuseNiNarisouStyleSeriesID");
      window.open("https://github.com/boredstudent13255/sc-manga-reader/new/main/titles/" + KuseNiNarisouStyleSeriesIDElement.value + "?filename=Chapt" + ChaptNumberElement.value + "/chapter.xml&value=" + LastLaunchedFinalXML, '_blank').focus();
    } else {
      window.open("https://github.com/boredstudent13255/sc-manga-reader/new/main/titles/" + SeriesIDEntryFieldElement.value + "?filename=Chapt" + ChaptNumberElement.value + "/chapter.xml&value=" + LastLaunchedFinalXML, '_blank').focus();
    }
  }

  if (target === "seriesxml") {
    const SeriesIDEntryFieldElement = document.getElementById("SeriesIDEntryField");
    window.open("https://github.com/boredstudent13255/sc-manga-reader/edit/main/titles/" + SeriesIDEntryFieldElement.value + "/series.xml?value=" + LastLaunchedFinalXML, '_blank').focus();
  }
  if (target === "nextchaptxml" && NextChaptCheckBox.checked) {
    const SeriesIDEntryFieldElement = document.getElementById("NextChaptSeriesID");
    const ChaptNumberElement = document.getElementById("NextChaptNumber");
    window.open("https://github.com/boredstudent13255/sc-manga-reader/edit/main/titles/" + SeriesIDEntryFieldElement.value + "/Chapt" + ChaptNumberElement.value + "/chapter.xml", '_blank').focus();
  } 
  if (target === "prevchaptxml" && LastChaptCheckBox.checked) {
    const SeriesIDEntryFieldElement = document.getElementById("PrevChaptSeriesID");
    const ChaptNumberElement = document.getElementById("PrevChaptNumber");
    window.open("https://github.com/boredstudent13255/sc-manga-reader/edit/main/titles/" + SeriesIDEntryFieldElement.value + "/Chapt" + ChaptNumberElement.value + "/chapter.xml", '_blank').focus();
  } 

}

//Does what it says. Checks for empty tags.
function checkFinishedXmlForEmptyTags() {
  CurrentChapterEntryInsertionPoint = document.querySelector("#CurrentChapterChapterDotXMLReGenerated");
  SeriesEntryInsertionPoint = document.querySelector("#SeriesDotXMLReGenerated");

  const xmlTestCurrChapt = CurrentChapterEntryInsertionPoint.innerText;
  const xmlTestSeries = SeriesEntryInsertionPoint.innerText;

  if (xmlTestCurrChapt.includes("></") || xmlTestCurrChapt.includes(">1900/1/1<")) {
    CurrentChapterEntryInsertionPoint.innerText = 'Empty tags were generated, please check your configuration.';
  }
  if (xmlTestSeries.includes("></") || xmlTestSeries.includes("/Chapt/") || xmlTestSeries.includes(">/Chapt")) {
    SeriesEntryInsertionPoint.innerText = 'Empty tags were generated, please check your configuration.';
  }
}

function regeneratePreviewChapterEntry() {
  var CurrChaptXMLArcTitle, CurrChaptXMLChapterTitle, CurrChaptXMLArcTitleOrig, CurrChaptXMLChapterNumReadable, CurrChaptXMLChapterTitleOrig, CurrChaptXMLPubDate, CurrChaptXMLScanDate, CurrChaptXMLChapterScanlator, CurrChaptXMLChapterDesc, SerializationOneShotWhichCurrentIs;
  ArcTitlesEnabledCheckbox = document.getElementById("HasChapterArcTitles");
  CurrChaptXMLArcTitle = document.getElementById("ScanlationArcTitle");
  CurrChaptXMLArcTitleOrig = document.getElementById("OriginalChapterArcTitle");
  if (ArcTitlesEnabledCheckbox.checked) {
    CurrChaptXMLArcTitle = "<span class='arc-title'>" + CurrChaptXMLArcTitle.value + "</span>";
    CurrChaptXMLArcTitleOrig = "<span class='arc-title-ja'>" + CurrChaptXMLArcTitleOrig.value + "</span>";
  } else {
    CurrChaptXMLArcTitle = "";
    CurrChaptXMLArcTitleOrig = "";
  }
  //Chapter Release Type (One-shot or Serialization)
  SerializationOneShotWhichCurrentIs = document.getElementById("ChapterReleaseType");
  if (SerializationOneShotWhichCurrentIs.value === "one-shot") {
    SerializationOneShotWhichCurrentIs = "<span class='is-one-shot'>One-Shot</span>";
  } else {
    SerializationOneShotWhichCurrentIs = "";
  }
  //Insert Chapter titles
  ChapterTitlesEnabledCheckbox = document.getElementById("HasChapterTitles");
  CurrChaptXMLChapterTitle = document.getElementById("ScanlationTitle");
  CurrChaptXMLChapterTitleOrig = document.getElementById("OriginalChapterTitle");
  if (ChapterTitlesEnabledCheckbox.checked) {
    CurrChaptXMLChapterTitle = ": " + CurrChaptXMLChapterTitle.value;
    CurrChaptXMLChapterTitleOrig = CurrChaptXMLChapterTitleOrig.value;
  } else {
    CurrChaptXMLChapterTitle = "";
    CurrChaptXMLChapterTitleOrig = "";
  }
  CurrChaptXMLChapterNumReadable = document.getElementById("ChaptNumber");
  CurrChaptXMLChapterNumReadable = CurrChaptXMLChapterNumReadable.value;

  CurrChaptXMLChapterDesc = document.getElementById("ScanlationSummary");
  //Prevent newline in chapter summary. This will break XML.
  const ScanlationSummaryElementValue = CurrChaptXMLChapterDesc.value;
  CurrChaptXMLChapterDesc.value = ScanlationSummaryElementValue.replaceAll(/\n/g, ' ')

  CurrChaptXMLChapterDesc = CurrChaptXMLChapterDesc.value;
  CurrChaptXMLPubDate = document.getElementById("InitialReleaseDateSetting");
  CurrChaptXMLPubDate = CurrChaptXMLPubDate.value;
  CurrChaptXMLScanDate = document.getElementById("ScanlationDateSetting");
  CurrChaptXMLScanDate = CurrChaptXMLScanDate.value;
  CurrChaptXMLChapterScanlator = document.getElementById("ScanlatorSetting");
  CurrChaptXMLChapterScanlator = CurrChaptXMLChapterScanlator.value;




  //Parse XML for Neighbor Chapter
  NavDropdown = document.getElementById("ChapterPlacementSetting");
  //console.log("Current dropdown value is " + NavDropdown.value);
    const CurrentChapterPreviewInsertionPoint = document.getElementById("CurrentChapterPreviewParent");
  if (NavDropdown.value !== "0") {
    var NeighborChaptXMLArcTitle, NeighborChaptXMLChapterNumReadable, NeighborChaptXMLChapterTitle, NeighborChaptXMLArcTitleOrig, NeighborChaptXMLChapterNumReadable, NeighborChaptXMLChapterTitleOrig, NeighborChaptXMLPubDate, NeighborChaptXMLScanDate, NeighborChaptXMLChapterScanlator, NeighborChaptXMLChapterDesc, SerializationOneShotWhichPreviousIs;

    var text, parser, previousChapterXML;
    text = loadFileToElement("https://boredstudent13255.github.io/sc-manga-reader/titles/" + SeriesXMLChaptersArray[NavDropdown.value - 1] + "chapter.xml");
    parser = new DOMParser();
    previousChapterXML = parser.parseFromString(text,"text/xml");
    NeighborChaptXMLChapterNumReadable = previousChapterXML.getElementsByTagName("chapterdisplaynum")[0].childNodes[0].nodeValue;
    if (text.includes("<chaptertitle>")) {
      NeighborChaptXMLChapterTitle = ": " + previousChapterXML.getElementsByTagName("chaptertitle")[0].childNodes[0].nodeValue;
      NeighborChaptXMLChapterTitleOrig = previousChapterXML.getElementsByTagName("ja-chapter-title")[0].childNodes[0].nodeValue;
    } else {
      NeighborChaptXMLChapterTitle = "";
      NeighborChaptXMLChapterTitleOrig = "";
    }
    if (text.includes("<arctitle>")) {
      NeighborChaptXMLArcTitle = "<span class='arc-title'>" + previousChapterXML.getElementsByTagName("arctitle")[0].childNodes[0].nodeValue + "</span>";
      NeighborChaptXMLArcTitleOrig = "<span class='arc-title-ja'>" + previousChapterXML.getElementsByTagName("ja-arc-title")[0].childNodes[0].nodeValue + "</span>";
    } else {
      NeighborChaptXMLArcTitle = "";
      NeighborChaptXMLArcTitleOrig = "";
    }
    if (text.includes("<type>one-shot</type>")) {
      SerializationOneShotWhichPreviousIs = "<span class='is-one-shot'>One-Shot</span>";
    } else {
      SerializationOneShotWhichPreviousIs = "";
    }
    NeighborChaptXMLChapterDesc = previousChapterXML.getElementsByTagName("chaptersummary")[0].childNodes[0].nodeValue;

    NeighborChaptXMLPubDate = previousChapterXML.getElementsByTagName("publisd")[0].childNodes[0].nodeValue;
    NeighborChaptXMLScanDate = previousChapterXML.getElementsByTagName("scanlatd")[0].childNodes[0].nodeValue;
    if (text.includes("<scanlator>")) {
      NeighborChaptXMLChapterScanlator = previousChapterXML.getElementsByTagName("scanlator")[0].childNodes[0].nodeValue;
    } else {
      NeighborChaptXMLChapterScanlator = "<i><span style='color: FF0000;'>No Scanlator was Specified.</span> Main page is defaulting to My Future Translations.</i>";
    }

    if (SeriesXMLChapterListOrder == "afterend") {
      CurrentChapterPreviewInsertionPoint.innerHTML = "<br><div class='scan-chapter'><i>Current Chapter</i><div class='scan-data'><span class='chapter-title-en'>" + SerializationOneShotWhichCurrentIs + CurrChaptXMLArcTitle + "Chapter " + CurrChaptXMLChapterNumReadable + CurrChaptXMLChapterTitle + "</span><div class='chapter-title-ja'>" + CurrChaptXMLArcTitleOrig + "第" + CurrChaptXMLChapterNumReadable + "話　" + CurrChaptXMLChapterTitleOrig + "</div><div class='years'>Published " + CurrChaptXMLPubDate + ", Scanlated " + CurrChaptXMLScanDate + " by " + CurrChaptXMLChapterScanlator + "</div><div class='scandata2'>" + CurrChaptXMLChapterDesc + "</div></div></div>" + "<div style='opacity: 0.5;' class='scan-chapter'><i>Previous Chapter</i><div class='scan-data'><span class='chapter-title-en'>" + SerializationOneShotWhichPreviousIs + NeighborChaptXMLArcTitle + "Chapter " + NeighborChaptXMLChapterNumReadable + NeighborChaptXMLChapterTitle + "</span><div class='chapter-title-ja'>" + NeighborChaptXMLArcTitleOrig + "第" + NeighborChaptXMLChapterNumReadable + "話　" + NeighborChaptXMLChapterTitleOrig + "</div><div class='years'>Published " + NeighborChaptXMLPubDate + ", Scanlated " + NeighborChaptXMLScanDate + " by " + NeighborChaptXMLChapterScanlator + "</div><div class='scandata2'>" + NeighborChaptXMLChapterDesc + "</div></div></div>";
    } else {
      CurrentChapterPreviewInsertionPoint.innerHTML = "<div style='opacity: 0.5;' class='scan-chapter'><i>Previous Chapter</i><div class='scan-data'><span class='chapter-title-en'>" + SerializationOneShotWhichPreviousIs + NeighborChaptXMLArcTitle + "Chapter " + NeighborChaptXMLChapterNumReadable + NeighborChaptXMLChapterTitle + "</span><div class='chapter-title-ja'>" + NeighborChaptXMLArcTitleOrig + "第" + NeighborChaptXMLChapterNumReadable + "話　" + NeighborChaptXMLChapterTitleOrig + "</div><div class='years'>Published " + NeighborChaptXMLPubDate + ", Scanlated " + NeighborChaptXMLScanDate + " by " + NeighborChaptXMLChapterScanlator + "</div><div class='scandata2'>" + NeighborChaptXMLChapterDesc + "</div></div></div>" + "<div class='scan-chapter'><i>Current Chapter</i><div class='scan-data'><span class='chapter-title-en'>" + SerializationOneShotWhichCurrentIs + CurrChaptXMLArcTitle + "Chapter " + CurrChaptXMLChapterNumReadable + CurrChaptXMLChapterTitle + "</span><div class='chapter-title-ja'>" + CurrChaptXMLArcTitleOrig + "第" + CurrChaptXMLChapterNumReadable + "話　" + CurrChaptXMLChapterTitleOrig + "</div><div class='years'>Published " + CurrChaptXMLPubDate + ", Scanlated " + CurrChaptXMLScanDate + " by " + CurrChaptXMLChapterScanlator + "</div><div class='scandata2'>" + CurrChaptXMLChapterDesc + "</div></div></div>";
    }
  } else {
//      CurrentChapterPreviewInsertionPoint.innerHTML = "test";
      CurrentChapterPreviewInsertionPoint.innerHTML = "<br><br><br><br><div class='scan-chapter'><i>Current Chapter <span style='font-size: 14; opacity: 0.75;'>(You have not set a previous chapter!)</span></i><div class='scan-data'><span class='chapter-title-en'>" + SerializationOneShotWhichCurrentIs + CurrChaptXMLArcTitle + "Chapter " + CurrChaptXMLChapterNumReadable + CurrChaptXMLChapterTitle + "</span><div class='chapter-title-ja'>" + CurrChaptXMLArcTitleOrig + "第" + CurrChaptXMLChapterNumReadable + "話　" + CurrChaptXMLChapterTitleOrig + "</div><div class='years'>Published " + CurrChaptXMLPubDate + ", Scanlated " + CurrChaptXMLScanDate + " by " + CurrChaptXMLChapterScanlator + "</div><div class='scandata2'>" + CurrChaptXMLChapterDesc + "</div></div></div>";
  }
}
  </script>
</html>
